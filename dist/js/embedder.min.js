!function(document,window){var embedder=function(selector,options){this.servicesSupported=[{name:"youtube",filter:/(?:https?:\/\/)?(?:(?:www\.)?(?:youtube(?:-nocookie)?|youtube.googleapis)\.com.*(?:v\/|v=|vi=|vi\/|e\/|embed\/|user\/.*\/u\/\d+\/)|youtu\.be\/)([_0-9a-z-]+)/i},{name:"vimeo",filter:/(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|)(\d+)/i},{name:"dailymotion",filter:/(?:https?:\/\/)?(?:www\.)?dai\.?ly(?:motion)?(?:\.com)?\/?.*(?:video|embed)?(?:.*v=|v\/|\/)([a-z0-9]+)/i},{name:"twitch",filter:/(?:https?:\/\/)?(?:www\.)?twitch\.(?:com|tv).*(?:v\/|v=|vi=|vi\/|videos\/)([0-9]+)/i}],this.selector=selector,this.options={autoplay:!1,cover:null,id:null,ratio:"16:9",service:null,url:null},options||(options={});var i;for(i in this.options)i in options&&(this.options[i]=options[i]);this._init()};embedder.prototype={_init:function(){if(this.selector.hasAttribute("data-embedder")||this.selector.setAttribute("data-embedder",""),this.selector.hasAttribute("data-ratio")&&(this.options.ratio=this.selector.getAttribute("data-ratio")),this._setRatio(),this.selector.hasAttribute("data-autoplay")&&(this.options.autoplay=!0),null==this.options.service||null==this.options.id)for(var lenService=this.servicesSupported.length,idxService=0;idxService<lenService;idxService++){var currentDataService="data-"+this.servicesSupported[idxService].name;if(this.selector.hasAttribute(currentDataService)){this.options.id=this.selector.getAttribute(currentDataService),this.options.service=this.servicesSupported[idxService].name;break}}if(null==this.options.url&&this.selector.hasAttribute("data-url")&&(this.options.url=this.selector.getAttribute("data-url")),null!=this.options.service&&null!=this.options.id||null===this.options.url)null!==this.options.service&&null!==this.options.id?this._buildIframe():null==this.options.service&&null==this.options.id&&null==this.options.url?this._log("Please provide a valid video URL or service + ID"):null==this.options.service&&null!==this.options.id?this._log("Please provide the video service for ID "+this.options.id):null!==this.options.service&&null==this.options.id&&this._log("Please provide the "+this.options.service+" video ID");else{var self=this;this._parseUrl(function(){self._buildIframe(self)})}},_addClickEvent:function(){var self=this;this.selector.addEventListener("click",function(e){self.selector.appendChild(self.iframe)})},_setRatio:function(){var ratio=this.options.ratio,exp=/(\d*\.?\d+):(\d|\.)/gs;exp.test(ratio);var padding=RegExp.$2/RegExp.$1*100;this.selector.style.paddingBottom=padding+"%"},_parseUrl:function(callback){for(var lenService=this.servicesSupported.length,idxService=0;idxService<lenService;idxService++){var test=this.servicesSupported[idxService].filter.exec(this.options.url);if(test){this.options.service=this.servicesSupported[idxService].name,this.options.id=test[1];break}}callback()},_createBaseIframe:function(){var iframe=document.createElement("iframe");return iframe.setAttribute("frameborder","0"),iframe.setAttribute("allowfullscreen",""),iframe},_createYoutubeIframe:function(id){var iframe=this._createBaseIframe(),src="https://www.youtube.com/embed/"+id;return this.options.autoplay&&(src+="?autoplay=1"),iframe.src=src,iframe.setAttribute("allow","accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"),iframe},_createVimeoIframe:function(id){var iframe=this._createBaseIframe(),src="https://player.vimeo.com/video/"+id;return this.options.autoplay&&(src+="?autoplay=1"),iframe.src=src,iframe.setAttribute("allow","autoplay; fullscreen"),iframe},_createDailymotionIframe:function(id){var iframe=this._createBaseIframe(),src="https://www.dailymotion.com/embed/video/"+id;return this.options.autoplay&&(src+="?autoPlay=1"),iframe.src=src,iframe.setAttribute("allow","autoplay"),iframe},_createTwitchIframe:function(id){var iframe=this._createBaseIframe(),src="https://player.twitch.tv/?video="+id;if(window.location.hostname){var hostname=window.location.hostname;src+="&parent="+hostname}return this.options.autoplay&&(src+="&autoPlay=1"),iframe.src=src,iframe},_buildIframe:function(){this.iframe=this["_create"+this.options.service[0].toUpperCase()+this.options.service.slice(1)+"Iframe"](this.options.id),this._addClickEvent()},_log:function(){window.console&&console.log}},embedder.init=function(el){embed=new embedder(el)},embedder.domInspect=function(){for(var elements=document.querySelectorAll("[data-embedder]"),i=0;i<elements.length;i++)embedder.init(elements[i])},window.embedder=embedder,embedder.domInspect()}(document,window);